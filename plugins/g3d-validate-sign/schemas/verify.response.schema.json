{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://blind.local/plugins/g3d-validate-sign/schemas/verify.response.schema.json",
  "title": "POST /verify response",
  "type": "object",
  "required": [
    "ok",
    "request_id"
  ],
  "properties": {
    "ok": {
      "type": "boolean",
      "$comment": "ok:true indica verificación correcta; ok:false mapeará códigos de error según docs/Capa 3 — Validación, Firma Y Caducidad — Actualizada (slots Abiertos) — V2 (urls).md, sección 2.2."
    },
    "code": {
      "type": "string",
      "$comment": "Errores como E_SIGN_EXPIRED, E_SIGN_INVALID, etc. (ver docs/Capa 3 — Validación, Firma Y Caducidad — Actualizada (slots Abiertos) — V2 (urls).md)."
    },
    "reason_key": {
      "type": "string",
      "$comment": "reason_key snake_case para analítica (ver docs/Capa 3 — Validación, Firma Y Caducidad — Actualizada (slots Abiertos) — V2 (urls).md)."
    },
    "detail": {
      "type": [
        "string",
        "null"
      ],
      "$comment": "Descripción opcional alineada con docs/plugin-3-g3d-validate-sign.md §6.2."
    },
    "request_id": {
      "type": "string",
      "$comment": "Identificador de auditoría (ver docs/Capa 3 — Validación, Firma Y Caducidad — Actualizada (slots Abiertos) — V2 (urls).md, Observabilidad)."
    }
  },
  "additionalProperties": true
}
