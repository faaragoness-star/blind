{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://blind.local/plugins/g3d-validate-sign/schemas/validate-sign.request.schema.json",
  "title": "POST /validate-sign request",
  "type": "object",
  "required": [
    "schema_version",
    "snapshot_id",
    "producto_id",
    "state",
    "locale"
  ],
  "properties": {
    "schema_version": {
      "type": "string",
      "$comment": "SemVer requerido. TODO(Capa 3 §Compatibilidad y versionado): validar patrón exacto."
    },
    "snapshot_id": {
      "type": "string",
      "$comment": "ID de snapshot publicado (docs/plugin-3-g3d-validate-sign.md §6.1)."
    },
    "producto_id": {
      "type": "string",
      "$comment": "ID estable de producto (docs/plugin-3-g3d-validate-sign.md §6.1)."
    },
    "state": {
      "type": "object",
      "$comment": "Estado serializado pieza→mat→modelo→col→tex→fin (docs/plugin-3-g3d-validate-sign.md §6.1). TODO(Plugin 3 §Esquemas): detallar estructura."
    },
    "locale": {
      "type": "string",
      "$comment": "Locale de la petición (docs/Capa 3 — Validación, Firma Y Caducidad — Actualizada (slots Abiertos) — V2 (urls).md, API 2.1). TODO(Plugin 3 §Esquemas): enumerar permitidos."
    },
    "flags": {
      "type": "object",
      "$comment": "Campo opcional flags? (docs/plugin-3-g3d-validate-sign.md §6.1). TODO(Plugin 3 §Esquemas): definir shape de flags/ab_variant.",
      "additionalProperties": true
    }
  },
  "additionalProperties": false
}
